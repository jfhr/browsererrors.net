<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title><%= error.code %></title>
        <link rel="stylesheet" href="../../index.css">
        <link rel="canonical" href="https://browsererrors.net/error/<%= error.code %>/">
        <style>
            @media (min-width: 576px) {
                form[rel="search"] {
                    display: flex;
                    gap: var(--spacing);
                }
                form[rel="search"] button {
                    max-width: 6em;
                }
            }
        </style>
    </head>
    <body>
        <main>
            <h1>
                <%= error.code %>
            </h1>
            <p>
                <%= error.code %> is an error in <%= error.browser %> with the description:
            </p>
            <pre><code><%= error.comment %></code></pre>
            <p>
                It is defined in the file
                <% if (error.href_noscript) { %>
                    <noscript>
                        <a href="<%= error.href_noscript %>" rel="nofollow">
                            <%= error.file %>, line <%= error.line %>
                        </a>
                    </noscript>
                    <script>
                        document.write(
                        `<a href="<%= error.href %>" rel="nofollow">
                            <%= error.file %>, line <%= error.line %>
                        </a>`);
                    </script>
                <% } else { %>
                    <a href="<%= error.href %>" rel="nofollow">
                        <%= error.file %>, line <%= error.line %>
                    </a>
                <% } %>
            </p>
            <p>
                <% if (error.browser === 'Chrome') { %>
                    This description is licensed under 
                    <a href="https://chromium.googlesource.com/chromium/src/+/HEAD/LICENSE" rel="license">
                        the Chromium license</a>.
                <% } else if (error.browser === 'Firefox') { %>
                    This description is licensed under 
                    <a href="https://www.mozilla.org/en-US/MPL/2.0/" rel="license">
                        the Mozilla Public License</a>.
                <% } %>
        </main>
        <hr>
        <footer>
            <p>
                BrowserErrors.net provides details on error codes used in Google Chrome and Mozilla Firefox,
                from the source code of those browsers.
            </p>
            <form action="../search.php" rel="search">
                <input type="text" name="code" id="code" required placeholder="Enter another error code">
                <button>Search</button>
            </form>
            <p>
                This website, except where otherwise noted, is licensed under the 
                <a href="" rel="license">
                    Creative Commons Zero License</a>.
                The source code is available 
                <a href="https://jfhr.de/source/jfhr/browsererrors.net">
                    on jfhr.de</a> or
                <a href="https://github.com/jfhr/browsererrors.net">
                    on GitHub.com</a>.
            </p>
        </footer>
        <script>
            /**
             * @param {string} code
             * @returns {string}
             */
            function fixErrorCode(code) {
                code = code.trim();
                if (code.startsWith('ERR_')) {
                    code = 'NET::' + code;
                }
                return code;
            }

            /** @type {HTMLFormElement} */
            const form = document.querySelector('form[rel="search"]');
            form.addEventListener('submit', event => {
                event.preventDefault();
                const data = new FormData(form);
                if (!data.has('code')) {
                    return;
                }
                const code = fixErrorCode(data.get('code'));
                location.href = `./error/${code}/`;
            });
        </script>
    </body>
</html>
